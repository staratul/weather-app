(function($){$.fn.stickyTabs=function(options){var context=this
var settings=$.extend({getHashCallback:function(hash,btn){return hash},selectorAttribute:"href",backToTop:false,initialTab:$('li.active > a',context)},options);var showTabFromHash=function(){var hash=settings.selectorAttribute=="href"?window.location.hash:window.location.hash.substring(1);var selector=hash?'a['+settings.selectorAttribute+'="'+hash+'"]':settings.initialTab;$(selector,context).tab('show');setTimeout(backToTop,1);}
var changeHash=function(hash){if(history&&history.pushState){history.pushState(null,null,window.location.pathname+window.location.search+'#'+hash);}else{scrollV=document.body.scrollTop;scrollH=document.body.scrollLeft;window.location.hash=hash;document.body.scrollTop=scrollV;document.body.scrollLeft=scrollH;}}
var backToTop=function(){if(settings.backToTop===true){window.scrollTo(0,0);}}
showTabFromHash();$(window).on('hashchange',showTabFromHash);$('a',context).on('click',function(e){var hash=this.href.split('#')[1];var adjustedhash=settings.getHashCallback(hash,this);changeHash(adjustedhash);setTimeout(backToTop,1);});return this;};}(jQuery));$(document).ready(function(){var bestPictures=new Bloodhound({datumTokenizer:Bloodhound.tokenizers.obj.whitespace('value'),queryTokenizer:Bloodhound.tokenizers.whitespace,remote:{url:'/weather/search.ashx?q=%QUERY',wildcard:'%QUERY'}});$('#ctl00_Search1_txtSearch').typeahead({highlight:true},{name:'location',display:'name',minLength:0,source:bestPictures});$('#ctl00_Search1_txtSearch').bind('typeahead:render',function(ev,suggestion,flag,name){$('#ctl00_Search1_txtSearch').addClass('loadinggif');});$('#ctl00_Search1_txtSearch').bind('typeahead:asyncreceive',function(ev,suggestion,name){$('#ctl00_Search1_txtSearch').removeClass('loadinggif');});$('#ctl00_Search1_txtSearch').bind('typeahead:select',function(ev,suggestion){$('#ctl00_Search1_txtSearch').removeClass('loadinggif');window.location="/weather/q/"+suggestion.url+"-"+suggestion.id;});});function remfav(key,u){$.ajax({url:'/weather/remfav.aspx',data:{k:key},type:"POST",success:function(data){$("#f"+u).hide("slow");},error:function(data,status,jqXHR){alert(jqXHR);}});}var x=document.getElementById("er");function getLocation(){$.ajax({url:'/weather/geo.ashx',type:"POST",success:function(data){showPosition(data);},error:function(data,status,jqXHR){alert(jqXHR);}});}function showPosition(position){window.location="/weather/?q="+encodeURIComponent(position);}function plotMap(lat,lon){var latlon=new google.maps.LatLng(lat,lon)
mapholder=document.getElementById('mapholder')
mapholder.style.height='280px';mapholder.style.width='100%';var myOptions={center:latlon,zoom:6,mapTypeId:google.maps.MapTypeId.ROADMAP,mapTypeControl:false,navigationControlOptions:{style:google.maps.NavigationControlStyle.SMALL}};var map=new google.maps.Map(document.getElementById("mapholder"),myOptions);var marker=new google.maps.Marker({position:latlon,map:map,title:"You are here!"});google.maps.event.addListener(map,'click',function(e){var infowindow=new google.maps.InfoWindow({content:'<h4>Location: '+e.latLng.lat().toFixed(4)+','+e.latLng.lng().toFixed(4)+'<h4>'+'<p><a href=\'/weather/?q='+e.latLng.lat().toFixed(4)+','+e.latLng.lng().toFixed(4)+'\'>Show Weather</a></p>'});var marker=new google.maps.Marker({position:e.latLng,map:map});infowindow.open(map,marker);});}function plotHomeMap(lat,lon){var latlon=new google.maps.LatLng(lat,lon)
mapholder=document.getElementById('maphome')
mapholder.style.height='300px';mapholder.style.width='100%';var myOptions={center:latlon,zoom:6,mapTypeId:google.maps.MapTypeId.ROADMAP,mapTypeControl:false,navigationControlOptions:{style:google.maps.NavigationControlStyle.SMALL}};var map=new google.maps.Map(document.getElementById("maphome"),myOptions);var marker=new google.maps.Marker({position:latlon,map:map,title:"You are here!"});google.maps.event.addListener(map,'click',function(e){var infowindow=new google.maps.InfoWindow({content:'<h4>Location: '+e.latLng.lat().toFixed(4)+','+e.latLng.lng().toFixed(4)+'<h4>'+'<p><a href=\'/weather/?q='+e.latLng.lat().toFixed(4)+','+e.latLng.lng().toFixed(4)+'\'>Show Weather</a></p>'});var marker=new google.maps.Marker({position:e.latLng,map:map});infowindow.open(map,marker);});}function searchMap(lat,lon){var latlon=new google.maps.LatLng(lat,lon)
mapholder=document.getElementById('mapholder')
mapholder.style.height='600px';mapholder.style.width='100%';var myOptions={center:latlon,zoom:6,mapTypeId:google.maps.MapTypeId.ROADMAP,mapTypeControl:false,navigationControlOptions:{style:google.maps.NavigationControlStyle.SMALL}};var map=new google.maps.Map(document.getElementById("mapholder"),myOptions);google.maps.event.addListener(map,'click',function(e){var infowindow=new google.maps.InfoWindow({content:'<h4>Location: '+e.latLng.lat().toFixed(4)+','+e.latLng.lng().toFixed(4)+'<h4>'+'<p><a href=\'/weather/?q='+e.latLng.lat().toFixed(4)+','+e.latLng.lng().toFixed(4)+'\'>Show Weather</a></p>'});var marker=new google.maps.Marker({position:e.latLng,map:map});infowindow.open(map,marker);});}function showError(error){switch(error.code){case error.PERMISSION_DENIED:x.innerHTML="User denied the request for Geolocation."
break;case error.POSITION_UNAVAILABLE:x.innerHTML="Location information is unavailable."
break;case error.TIMEOUT:x.innerHTML="The request to get user location timed out."
break;case error.UNKNOWN_ERROR:x.innerHTML="An unknown error occurred."
break;}}